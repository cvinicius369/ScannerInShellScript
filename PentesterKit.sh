bannerGeral(){
    echo "-----------------------------------"
    echo "     P E N T E S T E R - K I T     "
    echo "-----------------------------------"
}
Line(){ echo "-----------------------------------"; }
portscanner(){
    HOST=$1; START_PORT=$2; END_PORT=$3;
    echo "Scanning $HOST from port $START_PORT to $END_PORT..."
    for (( port=$START_PORT; port<=$END_PORT; port++ ))
    do
        (echo > /dev/tcp/$HOST/$port) >/dev/null 2>&1
        if [ $? -eq 0 ]; then echo "Port $port is open";
        else echo "Port $port is closed"; fi
    done
}
check_installed() {
    if command -v $1 >/dev/null 2>&1; then echo "$1 está instalado.";
    else echo "$1 NÃO está instalado.";
    fi
}
openApp(){
    if [ "$1" = "nmap" ]; then 
        echo "Iniciando scanner na faixa $2 . . ."; sudo nmap -sn "$2";
    elif [ "$1" = "metasploit" ]; then
        echo "Abrindo METASPLOIT . . ."; sudo msfconsole;
    elif [ "$1" = "portscanner" ]; then
        read -p "Informe o IP do host: " uIP;
        read -p "Porta inicial: " initialPort;
        read -p "Porta final: " finalPort;
        portscanner "$uIP" "$initialPort" "$finalPort";
    elif [ "$1" = "ngrok" ]; then 
        echo "Criando server na porta 2525"; sudo ngrok http 2525;
    elif [ "$1" = "stormB" ]; then
        echo "Abrindo o Storm break . . ."; 
        echo "Obs: o arquivo deve estar na mesma pagina do PentestKit";
        sudo st.py;
    else echo "Nenhuma função encontrada para essa entrada";
    fi
}
main(){ 
    bannerGeral
    while true
    do
        echo "[1] - PortScan    | [2] - Nmap"
        echo "[3] - Metasploit  | [4] - Ngrok"
        echo "[5] - Storm Break | [6] - Quit"
        read -p "-> " inUser
        if [ "$inUser" = "1" ]; then Line; openApp "portscanner"; Line;
        elif [ "$inUser" = "2" ]; then
            Line; read -p "Informe o IP da rede: " rede; 
            check_installed "nmap"; openApp "nmap" "$rede"; Line;
        elif [ "$inUser" = "3" ]; then 
            Line; check_installed "metasploit"; openApp "metasploit"; Line;
        elif [ "$inUser" = "4" ]; then 
            Line; check_installed "ngrok";
            echo "Verificação concluída."; openApp "ngrok"; Line;
        elif [ "$inUser" = "5" ]; then 
            Line; check_installed "storm-breaker"; echo "Verificação concluída."
            openApp "stormB"; Line;
        elif [ "$inUser" = "6" ]; then echo "Quiting . . ."; break
        else echo "Invalid Value"; fi
    done
}
main